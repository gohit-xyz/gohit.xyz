---
import ThemeToggle from '../../components/ThemeToggle.tsx'
import { GitHubIcon } from '../../components/icons/icons.ts'
---

<header
  class="sticky top-0 z-50 border-b border-gray-200 bg-white text-black dark:border-gray-800 dark:bg-black dark:text-white"
>
  <div class="container mx-auto flex items-center justify-between px-4 py-4">
    <!-- Logo -->
    <div class="text-2xl font-bold">
      <a href="/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-300">Gohit X</a>
    </div>

    <!-- Navigation Menu -->
    <nav class="hidden space-x-8 md:flex">
      <a href="/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-300">Home</a>
      <a href="/new" class="transition-colors hover:text-gray-600 dark:hover:text-gray-300">Linux</a
      >
      <a href="/me" class="transition-colors hover:text-gray-600 dark:hover:text-gray-300">Me</a>
    </nav>

    <!-- Right Side: Theme Toggle and GitHub -->
    <div class="flex items-center space-x-4">
      <ThemeToggle client:load />
      <a
        href="https://github.com/gohit-xyz/gohit.xyz"
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center space-x-2 transition-colors hover:text-gray-600 dark:hover:text-gray-300"
      >
        <GitHubIcon className="h-6 w-6" />
        <span id="github-stars" class="text-sm">Loading...</span>
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button class="md:hidden" id="menu-toggle">
      <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile Navigation -->
  <nav
    class="border-t border-gray-200 md:hidden dark:border-gray-800"
    id="mobile-menu"
    style="display: none;"
  >
    <div class="space-y-4 px-4 py-4">
      <a href="/" class="block transition-colors hover:text-gray-600 dark:hover:text-gray-300"
        >Home</a
      >
      <a href="/new" class="block transition-colors hover:text-gray-600 dark:hover:text-gray-300"
        >Linux</a
      >
      <a href="/me" class="block transition-colors hover:text-gray-600 dark:hover:text-gray-300"
        >Me</a
      >
    </div>
  </nav>
</header>

<script>
  // Mobile menu toggle
  const menuToggle = document.getElementById('menu-toggle')
  const mobileMenu = document.getElementById('mobile-menu')
  if (menuToggle && mobileMenu) {
    menuToggle.addEventListener('click', () => {
      mobileMenu.style.display = mobileMenu.style.display === 'none' ? 'block' : 'none'
    })
  }

  // Fetch GitHub stars
  async function fetchGitHubStars() {
    try {
      const response = await fetch('https://api.github.com/repos/gohit-xyz/gohit.xyz')
      const data = await response.json()
      const starsElement = document.getElementById('github-stars')
      if (starsElement) {
        starsElement.textContent = data.stargazers_count ? `${data.stargazers_count} ⭐` : '⭐'
      }
    } catch (error) {
      console.error('Error fetching GitHub stars:', error)
      const starsElement = document.getElementById('github-stars')
      if (starsElement) {
        starsElement.textContent = '⭐'
      }
    }
  }

  fetchGitHubStars()
</script>
