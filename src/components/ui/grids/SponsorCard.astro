---
interface Props {
  sponsor: {
    name: string
    photo: string
    tier?: string
    website?: string
  }
  index: number
}

const { sponsor, index } = Astro.props
---

<div
  class={`sponsor-card ${sponsor.tier || 'bronze'} relative overflow-hidden rounded-3xl bg-white/3 px-8 py-10`}
  data-index={index}
  data-tier={sponsor.tier || 'bronze'}
  style={`animation-delay: ${(index + 1) * 0.1}s`}
>
  <div class="card-glow pointer-events-none absolute -top-1/2 -left-1/2 h-[200%] w-[200%]"></div>
  <div class="card-content relative z-1 flex flex-col items-center gap-6">
    <div class="sponsor-photo-wrapper relative h-[140px] w-[140px]">
      <div class="photo-ring absolute -inset-2 rounded-full"></div>
      <img
        src={sponsor.photo}
        alt={sponsor.name}
        class="sponsor-photo relative h-full w-full rounded-full border-4 border-white/10 bg-white/5"
        loading="lazy"
      />
      <div class="photo-shine absolute top-0 -left-full h-full w-full rounded-full"></div>
    </div>
    <h3 class="sponsor-name text-center text-white">{sponsor.name}</h3>
    {
      sponsor.tier && (
        <div class="sponsor-badge flex items-center gap-2 rounded-full border bg-white/10 px-4 py-2">
          <span class="badge-icon">★</span>
          <span class="badge-text">{sponsor.tier}</span>
        </div>
      )
    }
  </div>
  {
    sponsor.website && (
      <a
        href={sponsor.website}
        class="sponsor-link relative mt-4 flex items-center justify-center gap-2 overflow-hidden rounded-xl border border-white/10 bg-white/5 px-6 py-3 text-white"
        target="_blank"
        rel="noopener noreferrer"
        aria-label={`Visit ${sponsor.name} website`}
      >
        <span class="link-text">Visit Website</span>
        <span class="link-arrow">→</span>
      </a>
    )
  }
</div>

<style>
  /* Sponsor Card */
  .sponsor-card {
    backdrop-filter: blur(10px);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    animation: card-entrance 0.6s ease-out backwards;
  }

  .sponsor-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, currentColor, transparent);
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .sponsor-card:hover::before {
    opacity: 1;
  }

  @keyframes card-entrance {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Tier Colors */
  .sponsor-card.platinum {
    color: #e5e7eb;
  }
  .sponsor-card.gold {
    color: #fbbf24;
  }
  .sponsor-card.silver {
    color: #94a3b8;
  }
  .sponsor-card.bronze {
    color: #cd7f32;
  }

  .sponsor-card:hover {
    transform: translateY(-8px) scale(1.02);
    border-color: rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.05);
  }

  /* Card Glow Effect */
  .card-glow {
    background: radial-gradient(circle, currentColor 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .sponsor-card:hover .card-glow {
    opacity: 0.1;
  }

  /* Photo Wrapper */
  .photo-ring {
    background: linear-gradient(135deg, currentColor, transparent);
    opacity: 0.5;
    animation: rotate 8s linear infinite;
  }

  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .sponsor-photo {
    object-fit: cover;
    transition: transform 0.4s ease;
  }

  .sponsor-card:hover .sponsor-photo {
    transform: scale(1.1);
  }

  .photo-shine {
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
  }

  .sponsor-card:hover .photo-shine {
    left: 100%;
  }

  /* Sponsor Name */
  .sponsor-name {
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1.3;
    transition: color 0.3s ease;
  }

  .sponsor-card:hover .sponsor-name {
    color: currentColor;
  }

  /* Badge */
  .sponsor-badge {
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: currentColor;
  }

  .badge-icon {
    font-size: 1rem;
    animation: sparkle 2s ease-in-out infinite;
  }

  @keyframes sparkle {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.2);
    }
  }

  /* Sponsor Link */
  .sponsor-link {
    text-decoration: none;
    font-weight: 600;
    font-size: 0.875rem;
    transition: all 0.3s ease;
  }

  .sponsor-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s ease;
  }

  .sponsor-link:hover::before {
    left: 100%;
  }

  .sponsor-link:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: currentColor;
    color: currentColor;
    transform: translateX(4px);
  }

  .link-arrow {
    transition: transform 0.3s ease;
  }

  .sponsor-link:hover .link-arrow {
    transform: translateX(4px);
  }
</style>

<script>
  // Add magnetic effect to cards
  const cards = document.querySelectorAll<HTMLElement>('.sponsor-card')

  cards.forEach((card) => {
    card.addEventListener('mouseenter', (e: Event) => {
      if (!(e instanceof MouseEvent)) return
      const rect = card.getBoundingClientRect()
      const x = e.clientX - rect.left
      const y = e.clientY - rect.top

      card.style.setProperty('--x', `${x}px`)
      card.style.setProperty('--y', `${y}px`)
    })

    card.addEventListener('mousemove', (e: Event) => {
      if (!(e instanceof MouseEvent)) return
      const rect = card.getBoundingClientRect()
      const x = e.clientX - rect.left
      const y = e.clientY - rect.top

      card.style.setProperty('--x', `${x}px`)
      card.style.setProperty('--y', `${y}px`)
    })
  })
</script>
