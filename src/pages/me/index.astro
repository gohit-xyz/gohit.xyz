---
import Layout from '@/layouts/Layout.astro'
import meImage from '@/assets/images/profile/me.jpg'
import NextPageBtn from '@/components/ui/buttons/NextPageBtn.astro'
import BackButtonTwo from '@/components/ui/buttons/BackButtonTwo.astro'
import { getCollection } from 'astro:content'
import { TwitterIcon, GitHubIcon, ArrowDownIcon } from '@/components/icons/icons'

// Get latest article
const articles = await getCollection('articles', ({ data }) => data.draft !== true)
const latestArticle = articles.sort(
  (a, b) => new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime()
)[0]

// Format date helper
const formatDate = (date: Date | string) => {
  return new Date(date).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  })
}

// Render the article content
const { Content } = await latestArticle.render()
---

<Layout>
  <div
    class="custom-cursor flex min-h-screen w-full items-center justify-center text-gray-900 dark:text-white"
  >
    <main class="relative mx-auto w-full max-w-4xl px-6 py-8 sm:px-6">
      <!-- Back & Date -->
      <nav class="mb-8 flex items-center gap-2 text-sm text-gray-400">
        <BackButtonTwo href="/" text="Back" useHistory={true} />
        <span class="opacity-40">/</span>
        <time
          datetime={latestArticle.data.publishDate instanceof Date
            ? latestArticle.data.publishDate.toISOString()
            : latestArticle.data.publishDate}
          class="text-gray-500"
        >
          {formatDate(latestArticle.data.publishDate)}
        </time>
      </nav>

      <!-- Main title -->
      <h1 class="mb-12 text-4xl font-bold md:text-5xl">
        Gohit X: FrontEnd
        <span class="block sm:inline">
          (<span class="opacity-60">
            <span class="text-[#f84f00]">web</span>,{' '}
            <span>mobile</span>, <span>üõ†Ô∏è</span>
          </span>)
        </span>
      </h1>

      <!-- Author Profile -->
      <div class="mb-4">
        <div class="flex items-center gap-4">
          <div
            class="relative h-16 w-16 overflow-hidden rounded-full border-4 border-gray-300 shadow-xl ring-2 ring-gray-300 dark:border-gray-800 dark:ring-gray-800"
          >
            <img
              src={meImage.src}
              alt="Gohit Bastian Profile"
              class="h-full w-full object-cover"
              loading="eager"
            />
          </div>
          <div>
            <div class="text-xl font-semibold">Gohit Bastian</div>
            <div class="flex items-center gap-2 text-sm text-gray-400">
              <span>@gohitx</span>
              <div class="flex gap-1.5">
                <a
                  href="https://twitter.com/gohitx"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="transition-colors hover:text-[#f84f00]"
                >
                  <TwitterIcon className="h-4 w-4" />
                </a>
                <a
                  href="https://github.com/gohitx"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="transition-colors hover:text-[#f84f00]"
                >
                  <GitHubIcon className="h-4 w-4" />
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="space-y-8 leading-relaxed opacity-80">
        <p>
          Hey üëã, I'm <span class="font-semibold opacity-100">Gohit</span>, a{' '}
          <span class="font-semibold">Software Engineer</span> from{' '}
          <span class="italic">Peru üáµüá™</span>. I specialize in building scalable mobile solutions
          and contributing to the open-source ecosystem.
        </p>

        <p>
          I don't just use Linux; I build tools for it. My focus is on developing solutions that
          empower creators, from mobile apps with <span class="font-bold">React Native</span> to developer
          tooling. I maintain extensions for{' '}
          <span class="font-semibold opacity-100">VS Code</span> and next-gen editors like Cursor, Antigravity,
          Trae.ai, and Kiro.
        </p>

        <p>
          Always iterating on my stack, I'm currently researching{' '}
          <span class="font-semibold">Lynx JS</span> and hybrid architectures to push the boundaries
          of what's possible. If you want to check out my work{' '}
          <a
            class="text-blue-500 hover:underline"
            href="https://marketplace.visualstudio.com/publishers/bastndev"
            target="_blank"
            rel="noopener noreferrer"
          >
            Here.
          </a>
        </p>
      </div>

      <!-- TODO:  -->
      <div class="relative mx-auto my-5 mt-24 max-w-4xl">
        <div
          class="h-px w-full bg-linear-to-r from-transparent via-gray-300 to-transparent dark:via-gray-800"
        >
        </div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
          <span
            class="rounded-lg bg-white px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-gray-300 dark:bg-[#0e0e0e] dark:text-white dark:ring-gray-800"
          >
            Latest Blog
          </span>
        </div>
      </div>
      <!-- TODO:  -->

      <!-- MARK: Blog -->
      {
        latestArticle && (
          <div class="relative mx-auto w-full">
            {/* Article Content Preview (Limited Height) */}
            <div class="relative overflow-hidden" style="max-height: 54rem;">
              <div class="space-y-8 leading-relaxed opacity-80">
                <div class="prose prose-gray dark:prose-invert prose-lg prose-headings:font-bold prose-headings:tracking-tight prose-h2:mb-6 prose-h2:mt-12 prose-h2:text-3xl prose-h3:mb-4 prose-h3:mt-8 prose-p:leading-normal prose-p:text-gray-700 dark:prose-p:text-gray-300 prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:no-underline hover:prose-a:text-blue-500 dark:hover:prose-a:text-blue-300 prose-strong:text-gray-900 dark:prose-strong:text-white prose-code:rounded prose-code:bg-transparent prose-code:px-1 prose-code:text-blue-600 dark:prose-code:text-blue-300 prose-code:font-mono prose-pre:rounded-lg prose-pre:border prose-pre:border-gray-300 dark:prose-pre:border-gray-700 prose-pre:bg-gray-100 dark:prose-pre:bg-gray-800 prose-pre:p-4 prose-pre:shadow-lg prose-table:w-full prose-table:border-collapse prose-thead:border-b prose-thead:border-gray-300 dark:prose-thead:border-gray-700 prose-th:px-4 prose-th:py-3 prose-th:text-left prose-th:font-semibold prose-th:text-gray-900 dark:prose-th:text-gray-200 prose-th:align-top prose-td:px-4 prose-td:py-3 prose-td:text-gray-700 dark:prose-td:text-gray-300 prose-td:border-t prose-td:border-gray-200 dark:prose-td:border-gray-800 prose-td:align-top prose-tr:border-b prose-tr:border-gray-200 dark:prose-tr:border-gray-800 mx-auto max-w-none">
                  <Content />
                </div>
              </div>

              {/* Fade Gradient Overlay */}
              <div class="pointer-events-none absolute right-0 bottom-0 left-0 h-48 bg-linear-to-t from-[#f6f6f6] via-[#f6f6f6]/80 to-transparent dark:from-[#000000] dark:via-[#000000]/80" />
            </div>

            {/* Read Full Article Button */}
            <div class="mt-8 flex justify-center">
              <a href={`/blog/${latestArticle.slug}`}>
                <button class="group flex h-14 w-14 cursor-pointer items-center justify-center rounded-full border-2 border-gray-300 bg-white shadow-lg transition-all hover:scale-110 hover:shadow-xl dark:border-gray-700 dark:bg-gray-900">
                  <ArrowDownIcon className="h-6 w-6 text-gray-900 transition-transform group-hover:translate-y-1 dark:text-white" />
                </button>
              </a>
            </div>
          </div>
        )
      }

      <!-- Button Article -->
      <div class="flex justify-end pt-6">
        <NextPageBtn href="/blog" text="More Blog Posts" class="cursor-pointer" />
      </div>
    </main>
  </div>
</Layout>

<style is:global>
  * {
    scrollbar-width: none;
    scrollbar-color: transparent transparent;
  }
  .custom-cursor {
    cursor: url('/cursors/Pointer.ico'), default;
  }
</style>
